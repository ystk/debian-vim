From: Markus Koschany <apo@debian.org>
Date: Sat, 12 Mar 2022 10:16:08 +0100
Subject: CVE-2022-0319

Origin: https://github.com/vim/vim/commit/05b27615481e72e3b338bb12990fb3e0c2ecc2a9
---
 src/window.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/src/window.c b/src/window.c
index b975a61..904f752 100644
--- a/src/window.c
+++ b/src/window.c
@@ -1501,6 +1501,11 @@ win_exchange(Prenum)
 
     (void)win_comp_pos();		/* recompute window positions */
 
+    if (wp->w_buffer != curbuf)
+	reset_VIsual_and_resel();
+    else if (VIsual_active)
+	wp->w_cursor = curwin->w_cursor;
+
     win_enter(wp, TRUE);
     redraw_later(CLEAR);
 }
